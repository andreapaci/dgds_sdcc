<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Progetto</title>
  

  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Ubuntu">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

  <!-- CSS -->
  <link rel="stylesheet" href="css/style.css">

</head>

<body>
	<section id="title">

		<div class="container-fluid">

			<div class="row">
				<div class="col1" >
					<img class="title-image" src="images/network.png" alt="iphone-mockup">
				</div>
				<div class="col2" >
				  Console di amministrazione <br/>
				  PUBLISH-SUBSCRIBE
				</div>
			
			</div>

		</div>

	</section>
	<div class="internal">
  
		<div style="text-align:center; margin-bottom: 60px;font-size:100px; font-weight:bold; color: rgba(40, 40, 40, 1); text-shadow: 2px 2px rgba(0, 0, 0, 0.3);"> 
		<u>Dashboard</u> 
		</div>
		<div style="padding-left:50px; padding-right:30px">
			Inserire il nome dell'<b>hostname</b> nella casella di testo sottostante nel formato "google.com" (senza apici). 
				Per manipolare le impostazioni di <b>configurazione</b>, visualizzare/modificare i dati relativi ai <b>subscriber</b> e dei <b>publisher</b> premere sul relativo pulsante.
				In caso di errori Ã¨ possibile consultare il log della console del browser. <br><br><br>
		</div>
				  
		<div class="req textfield" >
			<div class="input-goup mb-3">
				<div style="padding-left:2em; margin-bottom: 5px"> <b>Hostname </b></div>
				<input type="text" id="hostname" class="form-control" placeholder="Nome dell'host (es. 'google.com')" 
					onKeyUp="document.getElementById('panel-frame').contentWindow.postMessage(document.getElementById('hostname').value, '*');"  aria-label="Recipient's username" aria-describedby="basic-addon2" ;><br/>
			</div>
		</div>	
		<div style="text-align: center;  display: table;  table-layout: fixed; width:100%; margin-bottom:50px">
			<span style=" display: table-cell; text-align: center;" >
				  <button class="btn btn-dark" type="button" onclick = "document.getElementById('panel-frame').contentWindow.postMessage(document.getElementById('hostname').value, '*'); 
				  document.getElementById('panel-frame').src = 'pages/configuration.html';" id="configuration_btn" >Configurazione Broker</button>
			</span>
			<span style="display: table-cell; text-align: center;">
				<button class="btn btn-dark" type="button" onclick = "document.getElementById('panel-frame').src = 'pages/subscriber.html';
				document.getElementById('panel-frame').contentWindow.postMessage(document.getElementById('hostname').value, '*');" id="subscribers_btn">Subscribers</button>
			</span>
			<span style=" display: table-cell; text-align: center;">
				 <button class="btn btn-dark" type="button" onclick = "document.getElementById('panel-frame').contentWindow.postMessage(document.getElementById('hostname').value, '*');
				 document.getElementById('panel-frame').src = 'pages/publisher.html'" id="publisher_btn" >Publisher</button>
			</span>
		</div>
		<script>
			const userAction = async () => {
			document.getElementById('panel-frame').src = "index2.html";
			var requestType = document.getElementById("request-type").value;
			var requestUri = 'http://' + document.getElementById("uri").value;
			var requestBody = document.getElementById("request-body").value;
			if (requestType.toLowerCase() == 'get') { requestBody = null }
					
			const response = await fetch(requestUri, {
							
				method : requestType,
				body : requestBody
						  
			});
							
			response.text().then(function (text) {
				console.log(text);// do something with myJson
			});
						  
						}
		</script>
				
				
		<div>
			<iframe id="panel-frame" src="pages/configuration.html" width="80%" onmouseover="document.getElementById('panel-frame').contentWindow.postMessage(document.getElementById('hostname').value, '*');" style="height: 1100px; border: solid; margin: 0 auto; margin-bottom: 10px; display:block;" frameborder="0"></iframe> <br><br><br>
		</div>
		<div  style="padding-left:20em; display: inline-block;">
			<i>                   Sistemi distribuiti e Cloud computing - Andrea Paci</i>
		</div>
	</div>

			  
  
  
</body>
</html>
